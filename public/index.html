<!DOCTYPE html>
<html>

<head>
	<title>ANNOTATOR</title>

	<meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/bootstrap-theme.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="js/utils.js"></script>

	<link rel="stylesheet" type="text/css" href="css/style.css" media="all">
	<link rel="stylesheet" type="text/css" href="css/autocomplete.css" media="all">


	 <!-- Compiled and minified CSS -->
	 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

	 <!-- Compiled and minified JavaScript -->
	 <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

	<meta name="viewport" content="width=device-width, initial-scale=1">
	<style>
		.highlight {
			background-color: yellow;
		}
	.loader {
		position: absolute;
	  border: 16px solid #f3f3f3;
	  border-radius: 50%;
	  border-top: 16px solid #3498db;
	  width: 120px;
	  height: 120px;
	  top: 50%;
  	  left: 45%;
	  -webkit-animation: spin 2s linear infinite; /* Safari */
	  animation: spin 2s linear infinite;
	}
	.jumbotron{
		padding: 100px 25px;
		padding-top: 60px;
	}
	
	/* Safari */
	@-webkit-keyframes spin {
	  0% { -webkit-transform: rotate(0deg); }
	  100% { -webkit-transform: rotate(360deg); }
	}
	
	@keyframes spin {
	  0% { transform: rotate(0deg); }
	  100% { transform: rotate(360deg); }
	}
	.checkbox-inline {
    position: relative;
    display: inline-block;
    padding-left: 20px;
    margin-bottom: 0;
    font-weight: 400;
    vertical-align: middle;
    cursor: pointer;
    font-size: 20px;
}
.white-text {
		color: black !important;
	}
	.blue-grey.darken-1 {
    background-color: #fefefe !important;
}
a {
    color: dodgerblue;
    text-decoration: none;
    -webkit-tap-highlight-color: transparent;
}
.card .card-action a:not(.btn):not(.btn-large):not(.btn-small):not(.btn-large):not(.btn-floating) {
    color: #2565ae;
    margin-right: 24px;
    -webkit-transition: color .3s ease;
    transition: color .3s ease;
    text-transform: uppercase;
}
td, th {
    padding: 15px 5px;
    display: table-cell;
    text-align: center;
    vertical-align: middle;
    border-radius: 2px;
}
.container {
    margin: 0 auto;
    max-width: 1280px;
    width: 90%;
}

	</style>
</head>
<body>

<!-- Navbar Begins -->
<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
    	<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>
      <a class="navbar-brand" href="index.html">Annotator Text</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
    <ul class="nav navbar-nav navbar-right">
	  <li><a href="#">MEDICINE</a></li>
	  <li><a href="#">COMPUTER</a></li>
      <li><a href="#">A-Z WORDS</a></li>
      <li><a href="#">ABOUT US</a></li>
      <li><a href="#">FEEDBACK</a></li>
    </ul>
</div>
  </div>
</nav>
<!-- Navbar ends -->
<br>
<div class="container-fluid">
<div class="jumbotron text-center">
	<h3>Start Annotating</h3>
	<form>
			<div class="input-group">
			  <input type="text" class="form-control" size="50" id="searchword" placeholder="Enter the sentence" required>
			  <div class="input-group-btn">
				<button type="button" class="btn btn-danger" id="btngo">Search</button>
			  </div>
			</div>
		  </form>
			<!--
		  <label class="checkbox-inline">Merriam-Webster
			<input type="checkbox" id="dic0" value="0" checked="true">
			<span class="checking"></span>
			</label> -->
			<label class="checkbox-inline">Bioportal
				<input type="checkbox" name="dictionary" value="0" checked="true">
				<span class="checking"></span>
			</label>
		  <label class="checkbox-inline">CSIRO-2
			<input type="checkbox" name="dictionary" value="1" checked="true">
			<span class="checking"></span>
		  </label>
		  <label class="checkbox-inline">CSIRO-1
			<input type="checkbox" name="dictionary" value="2" checked="true">
			<span class="checking"></span>
		  </label>
		  <label class="checkbox-inline">Urbanup
			<input type="checkbox" name="dictionary" value="3" checked="true">
			<span class="checking"></span>
		  </label>
		  
		
</div>
</div>
<br>
<div id="div_err" style="display:none;"  class="container">
	<div class="row">
		<div class="col-md-1"></div>
		<div class="col-md-10" style="text-align:center;">
			<label id="error_msg" style="color:red;"></label>
		</div>
	</div>
</div>

<div id="div_loading" style="display:none;" class="container">
	<div class="row" style="text-align:center;">
			
				<div class="loader"></div>
				<div>
					<label id="error_msg" style="color:red;"></label>
				</div>
		
	</div>
</div>



<div class="container">
		<div class="row">
				<div id="inputText"></div>
		</div>
</div>



<div class="container" id="div_result">
	<div class="row">
		<div class="col-md-1"></div>

		<div class="col-md-15">
			<table class="table-bordered" style="width: 100%">
				<colgroup><col width="50%">
				</colgroup><tbody><tr class="active">
					<th class="th1">Selected Definitions</th>
					<th class="th1">Results <label id="resultnb"></label></th>
				</tr>
				<tr>
					<td style="vertical-align: top; " id="td_selected"></td>
					<td id="td_results">

					</td>
				</tr>
			</tbody></table>
		</div>
		<input type="hidden" id="selected_id">

	</div>
</div>


<script>

	$(document).ready(function() {

		/*eslint-env jquery */
		$( "#btngo" ).click(function() {
			//console.log('Here is me: ' + getSelectedDictionaries());
			$("#div_err").hide();
			$("#div_loading").show();
			$("#div_result").hide();
			$("#td_selected").show().html("");
			$("#td_results").show().html("");
			$("#resultnb").html("(0)");
			var searchword = $("#searchword").val();

			$.get("/api/core/readdocument?searchword=" + searchword, function (data) {
				/* Get definitions from Cached DB */
				$("#td_selected").show().html("");
				resultDb = data; // from DB
				$("#td_selected").show().html(formHtmlDeleteCard(resultDb));

				$.get("/api/core/definitions?searchword=" + searchword + "&dic="+getSelectedDictionaries(), function (dic) {
					$("#div_result").show();
					$("#div_loading").hide();
					// alert(dic.error);
					if (dic.error != "")
					{
						$("#div_err").show();
						$("#error_msg").html(dic.error);
					}else{
						//
						$("#resultnb").html("(" +dic.definitions.length + ")");
						$("#td_results").show().html(formHtmlSelectCard(dic.definitions));
						result = dic.definitions;
						$("#resultnb").html("(" + result.length + ")");
						$("#td_results").show().html(formHtmlSelectCard(result));

						$("#inputText").text(searchword);

						var bestDefinitions = getBestMatchDefinition(dic);
						// Start highlight
						for (var i = 0; i < dic.keywords.length; i++){
							highlight(dic.keywords[i],bestDefinitions[i].definition, "inputText");
						}
					}
				});
			});

		});


		// Get the input field
		var input = document.getElementById("searchword");

		// Execute a function when the user releases a key on the keyboard
		input.addEventListener("keyup", function (event) {
			// Cancel the default action, if needed
			event.preventDefault();
			// Number 13 is the "Enter" key on the keyboard
			if (event.keyCode === 13) {
				// Trigger the button element with a click
				document.getElementById("btngo").click();
			}
		});
	});
</script>
<script src="js/autocomplete.js"></script>

</body>
</html>